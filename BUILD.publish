load("@build_bazel_rules_nodejs//:index.bzl", "js_library")
load("@npm//rules_prerender:index.bzl", "prerender_component")

exports_files(glob(["**/*.bzl"]), visibility = ["//visibility:public"])

prerender_component(
    name = "declarative_shadow_dom",
    srcs = [
        "declarative_shadow_dom.js",
        "declarative_shadow_dom.d.ts",
    ],
    deps = ["//packages/rules_prerender/declarative_shadow_dom"],
    visibility = ["//visibility:public"],
)

# `js_library()` for client-side scripts must be in the workspace root so the
# `path` attribute links correctly and Rollup will resolve and bundle the script
# as expected.
js_library(
    name = "_declarative_shadow_dom_scripts_lib",
    srcs = [
        "@npm//:node_modules/rules_prerender/packages/rules_prerender/declarative_shadow_dom/declarative_shadow_dom_polyfill.mjs",
        "@npm//:node_modules/rules_prerender/packages/rules_prerender/declarative_shadow_dom/declarative_shadow_dom_polyfill.d.ts",
    ],
    # Link under `external/npm/rules_prerender/...`.
    package_name = "rules_prerender",
    visibility = ["@npm//rules_prerender/packages/rules_prerender/declarative_shadow_dom:__pkg__"],
)
